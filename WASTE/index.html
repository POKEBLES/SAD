<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waste Management Dashboard</title>
    
    <link rel="stylesheet" href="index.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Poppins chosen for a friendly, modern UI that suits a municipal dashboard -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>

    <header class="dashboard-header">
        <div class="header-logo">
            <img src="https://tse1.mm.bing.net/th/id/OIP.7FZwq6jY3y6N8DpbxpyIagHaHa?pid=Api&P=0&h=180" alt="Partner Logo" class="header-logo-img-alt">
            <h1>Manila Waste Analytics</h1>
        </div>
        <nav class="header-nav">
            <a href="index.html" class="active"><i class="fa-solid fa-chart-pie"></i> Dashboard</a>
            <a href="data-management.html"><i class="fa-solid fa-file-csv"></i> Data Management</a>
            <a href="forecasting.html"><i class="fa-solid fa-chart-line"></i> Forecasting</a>
            <a href="clustering.html"><i class="fa-solid fa-users-viewfinder"></i> Clustering</a>
            <a href="reports.html"><i class="fa-solid fa-file-lines"></i> Reports</a>
            <a href="feedback.html"><i class="fa-solid fa-bullhorn"></i> Feedback</a>
            <a href="admin-dashboard.html"><i class="fa-solid fa-shield"></i> Admin</a>
            <a href="user-management.html"><i class="fa-solid fa-users"></i> Users</a>
        </nav>
        <div class="header-profile">
            <i class="fa-solid fa-user-circle" id="user-profile-icon" style="cursor: pointer; transition: transform 0.2s;" title="Click to view profile"></i>
        </div>
    </header>

    <script>
      document.getElementById('user-profile-icon').addEventListener('click', function(){
        window.location.href = 'user-profile.html';
      });
    </script>

    <main class="dashboard-container">

        <div class="kpi-grid">
            
            <div class="dashboard-card kpi-card">
                <div class="kpi-icon icon-reports">
                    <i class="fa-solid fa-file-invoice"></i>
                </div>
                <div class="kpi-info">
                    <span class="kpi-title">Total Waste Reports</span>
                    <span class="kpi-value">1,824</span>
                    <span class="kpi-context">+5% from last month</span>
                </div>
            </div>

            <div class="dashboard-card kpi-card">
                <div class="kpi-icon icon-forecast">
                    <i class="fa-solid fa-chart-line"></i>
                </div>
                <div class="kpi-info">
                    <span class="kpi-title">Predicted Waste Volume (ARIMA)</span>
                    <span class="kpi-value">4,200 Tons</span>
                    <span class="kpi-context">Forecast for next 7 days</span>
                </div>
            </div>

            <div class="dashboard-card kpi-card">
                <div class="kpi-icon icon-cluster">
                    <i class="fa-solid fa-object-group"></i>
                </div>
                <div class="kpi-info">
                    <span class="kpi-title">Cluster Behavior Summary</span>
                    <span class="kpi-value">3 Key Groups</span>
                    <span class="kpi-context">Based on K-Means results</span>
                </div>
            </div>
        </div>

        <div class="main-grid">

            <div class="dashboard-card map-container">
                <h3>Waste Density Map (Manila City)</h3>
                <p>Live map showing waste density by district. (This is a static placeholder).</p>
                <!-- Interactive map will replace the static placeholder -->
                <div id="manila-map" aria-label="Interactive map of Manila City"></div>
                <noscript>
                    <img src="https://i.imgur.com/g1fBfM4.png" alt="Static placeholder map of Manila (enable JavaScript to see interactive map)">
                </noscript>
            </div>

    <!-- Leaflet JS and map initialization -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        // Center on Manila City
        var manilaCenter = [14.5995, 120.9842];
        var map = L.map('manila-map', { inertia: true }).setView(manilaCenter, 12);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // Sample district-like points (lat, lon, fake density value)
        var samples = [
            { name: 'District I', coords: [14.6100, 120.9800], density: 80 },
            { name: 'District II', coords: [14.5800, 120.9800], density: 45 },
            { name: 'District III', coords: [14.5950, 121.0000], density: 60 },
            { name: 'District IV', coords: [14.5955, 120.9600], density: 120 }
        ];

        // Helper to choose color by density
        function densityColor(v) {
            return v > 100 ? '#A72703' :
                   v > 70  ? '#FCB53B' :
                   v > 40  ? '#FFE797' :
                             '#84994F';
        }

        samples.forEach(function(s) {
            var circle = L.circle(s.coords, {
                radius: s.density * 6, // scale for visibility
                color: densityColor(s.density),
                fillColor: densityColor(s.density),
                fillOpacity: 0.5,
                weight: 1
            }).addTo(map);

            circle.bindPopup('<strong>' + s.name + '</strong><br/>Estimated waste index: ' + s.density);
        });

        // Add a simple legend control
        var legend = L.control({ position: 'bottomright' });
        legend.onAdd = function (map) {
            var div = L.DomUtil.create('div', 'map-legend');
            div.innerHTML = '<strong>Waste index</strong><br/>' +
                '<div style="display:flex;gap:6px;align-items:center;margin-top:6px">' +
                '<span style="width:14px;height:14px;background:#A72703;display:inline-block;border-radius:3px"></span> High (100+)<br/>' +
                '<span style="width:14px;height:14px;background:#FCB53B;display:inline-block;border-radius:3px"></span> Medium-High<br/>' +
                '<span style="width:14px;height:14px;background:#FFE797;display:inline-block;border-radius:3px"></span> Medium<br/>' +
                '<span style="width:14px;height:14px;background:#84994F;display:inline-block;border-radius:3px"></span> Low' +
                '</div>';
            return div;
        };
        legend.addTo(map);
    });
    </script>
            <div class="dashboard-card alerts-container">
                <h3><i class="fa-solid fa-triangle-exclamation"></i> Active Alerts & Forecasts</h3>
                <ul class="alert-list">
                    
                    <li class="alert-item alert-danger">
                        <div class="alert-icon">
                            <i class="fa-solid fa-arrow-trend-up"></i>
                        </div>
                        <div class="alert-text">
                            <strong>FORECAST SPIKE</strong>
                            <span>+20% waste in <strong>District IV</strong> next week.</span>
                        </div>
                    </li>
                    
                    <li class="alert-item alert-warning">
                        <div class="alert-icon">
                            <i class="fa-solid fa-chart-simple"></i>
                        </div>
                        <div class="alert-text">
                            <strong>COMPLIANCE DROP</strong>
                            <span><strong>District II</strong> compliance down to 75%.</span>
                        </div>
                    </li>

                    <li class="alert-item alert-info">
                        <div class="alert-icon">
                            <i class="fa-solid fa-recycle"></i>
                        </div>
                        <div class="alert-text">
                            <strong>NEW DATA</strong>
                            <span>Nov. 10 dataset successfully imported.</span>
                        </div>
                    </li>
                    
                    <li class="alert-item alert-info">
                        <div class="alert-icon">
                            <i class="fa-solid fa-magnifying-glass-chart"></i>
                        </div>
                        <div class="alert-text">
                            <strong>K-MEANS UPDATE</strong>
                            <span>Model retrained. Cluster patterns stable.</span>
                        </div>
                    </li>

                </ul>
            </div>

        </div> </main> </body>
</html>